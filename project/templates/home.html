<!DOCTYPE html>
{% extends "layout.html" %}
{% block content %}
<head>
    <script>
        function stream() {
            fetch('/stream')
                .then(function (response) {
                    return response.json();
                }).then(function (text) {
                document.getElementById("temperature").innerHTML = text.temp;
                document.getElementById("humidity").innerHTML = text.humi;
                document.getElementById("filament").innerHTML = text.state;
                document.getElementById("status").innerHTML = text.status;
            });
            setTimeout(stream, 5000);
        }
        stream()
    </script>
    <script>
        function resume (){
            fetch('/resume_printer')
            document.getElementById("start").classList.remove('button');
            document.getElementById("start").classList.add('disabled');

            document.getElementById("pause").classList.remove('disabled');
            document.getElementById("pause").classList.add('button');
        }
        function start (){
            fetch('/start_printer')
            document.getElementById("start").onclick = function() {resume()};
            document.getElementById("start").classList.remove('button');
            document.getElementById("start").classList.add('disabled');

            document.getElementById("pause").classList.remove('disabled');
            document.getElementById("pause").classList.add('button');



        }
        function pause (){
            document.getElementById("start").innerHTML = 'Resume Print'
            document.getElementById("start").classList.remove('disabled');
            document.getElementById("start").classList.add('button');

            document.getElementById("pause").classList.remove('button');
            document.getElementById("pause").classList.add('disabled');

        }


    </script>
</head>
<body>


        <div class="flex-container-display">
            <div class="flex-child">
                <iframe src="http://172.20.10.2/stream" width="640" height="500"></iframe>
            </div>
            <div class="flex-container-information">
            <div class="flex-child" style="text-align: center;">
                <h2>Temperature:</h2>
                <p id="temperature"> 0 </p>
            </div>
            <div class="flex-child" style="text-align: center;">
                <h2>Humidity:</h2>
                <p id="humidity"> 0 </p>
                <div style="padding-top: 70%;">
                    <form action = "" method = "post" enctype="multipart/form-data">
                        <label class="button">
                        <input type="file" name="file" onchange="form.submit()"/>
                             Upload G-code
                        </label>
                    </form>
                </div>
            </div>
            <div class="flex-child" style="text-align: center;">
                <h2>Filament State:</h2>
                <p id="filament"> N/A </p>
                <div style="padding-top: 70%;">
                    <button id="pause" class="button" onclick="pause()">Pause Print</button>
                </div>
            </div>
            <div class="flex-child" style="text-align: center;">
                <h2>Print Status:</h2>
                <p id="status"> N/A </p>

                <div style="padding-top: 70%;">
                    <button id="start" class="button" onclick="start()">Start Print</button>
                </div>
            </div>


            </div>

        </div>
</body>


{% endblock content %}
